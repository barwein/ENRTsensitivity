% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sa_bootstrap_wrap.R
\name{run_sensitivity_bootstrap}
\alias{run_sensitivity_bootstrap}
\title{Wrapper for Sensitivity Analysis with Non-Parametric Bootstrap}
\usage{
run_sensitivity_bootstrap(
  Y_e,
  Y_a,
  X_e = NULL,
  X_a = NULL,
  Z_e,
  F_a,
  ego_id_a,
  reg_model_egos,
  reg_model_alters,
  formula_egos,
  formula_alters,
  pi_list_ego_ego,
  pi_list_alter_ego,
  kappa_vec,
  pz = 0.5,
  B = 500,
  n_folds = 2,
  n_cores = 1,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{Y_e}{A numeric vector of outcomes for the egos.}

\item{Y_a}{A numeric vector of outcomes for the alters.}

\item{X_e}{A numeric matrix of covariates for the egos.}

\item{X_a}{A numeric matrix of covariates for the alters.}

\item{Z_e}{A binary numeric vector (0 or 1) of treatment assignments for egos.}

\item{F_a}{A binary numeric vector (0 or 1) of `observed` exposures for alters.}

\item{ego_id_a}{A numeric vector mapping each alter to their ego's index
(an integer from 1 to n_e).}

\item{reg_model_egos}{A function for the egos' outcome regression model, e.g., `glm`, `lm`.}

\item{reg_model_alters}{A function for the alters' outcome regression model, e.g., `glm`, `lm`.}

\item{formula_egos}{A formula for the egos' regression model.}

\item{formula_alters}{A formula for the alters' regression model.}

\item{pi_list_ego_ego}{A list of exposure probabilities (`pi_i^e`) for egos.}

\item{pi_list_alter_ego}{A list of exposure probabilities (`pi_i^a`) for alters.}

\item{kappa_vec}{A numeric vector of values for the kappa sensitivity parameter.}

\item{pz}{The known probability of an ego being assigned to treatment, Pr(Z=1).}

\item{B}{An integer specifying the number of bootstrap iterations.}

\item{n_folds}{The number of folds to use for cross-fitting outcome models
in `SA_one_iter`.}

\item{n_cores}{An integer specifying the number of CPU cores to use for
parallel processing.}

\item{verbose}{A logical indicating whether to print progress messages.}

\item{...}{Additional arguments passed to the regression model functions.}
}
\value{
A list containing two data.tables:
\describe{
  \item{IE_results}{A data.table with point estimates (`ie_rd`),
        empirical variance (`ie_rd_var`), and bootstrap variance
        (`ie_rd_boot_var`) for each sensitivity parameter.}
  \item{DE_results}{A data.table with point estimates (`de_rd`),
        empirical variance (`de_rd_var`), and bootstrap variance
        (`de_rd_boot_var`) for each combination of sensitivity parameters.}
}
}
\description{
This function wraps the single-iteration sensitivity analysis (`SA_one_iter`)
in a non-parametric bootstrap procedure to estimate the variance of the
bias-corrected indirect and direct effects.
The bootstrap procedure resamples ego-networks (i.e., egos and all their
recruited alters) with replacement. The variance is estimated by computing
the sample variance of the point estimates obtained from the bootstrap samples.
}
\keyword{internal}
