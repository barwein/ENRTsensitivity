% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/outcomes_models.R
\name{estimate_outcome_models_cf}
\alias{estimate_outcome_models_cf}
\title{Estimate Outcome Models via K-Fold Cross-Fitting}
\usage{
estimate_outcome_models_cf(
  Y_e,
  Y_a,
  X_e = NULL,
  X_a = NULL,
  Z_e,
  F_a,
  ego_id_a,
  reg_model_egos,
  reg_model_alters,
  formula_egos,
  formula_alters,
  n_folds = 2,
  ...
)
}
\arguments{
\item{Y_e}{A numeric vector of outcomes for the egos (length n_e).}

\item{Y_a}{A numeric vector of outcomes for the alters (length n_a).}

\item{X_e}{A numeric matrix of covariates for the egos (n_e rows).
Can be `NULL` if no covariates are used.}

\item{X_a}{A numeric matrix of covariates for the alters (n_a rows).
Must have the same number of columns as `X_e`. Can be `NULL`.}

\item{Z_e}{A binary numeric vector (0 or 1) of treatment assignments for egos.}

\item{F_a}{A binary numeric vector (0 or 1) of `observed` exposures for alters.}

\item{ego_id_a}{A numeric vector mapping each alter to their ego's *index*
(an integer from 1 to n_e).}

\item{reg_model_egos}{A function for the egos' outcome model (e.g., `glm`).}

\item{reg_model_alters}{A function for the alters' outcome model (e.g., `glm`).}

\item{formula_egos}{A formula for the egos' model. Vars: `Y`, `Z`, `X1`, `X2`...}

\item{formula_alters}{A formula for the alters' model. Vars: `Y`, `F`, `X1`, `X2`...}

\item{n_folds}{The number of folds for cross-fitting (e.g., 2).}

\item{...}{Additional arguments passed to the regression model functions
(e.g., `family = binomial`).}
}
\value{
A list containing four numeric vectors of cross-fitted predictions:
\describe{
  \item{mu_a_1}{Predictions for alters with F=1 (length n_a).}
  \item{mu_a_0}{Predictions for alters with F=0 (length n_a).}
  \item{mu_e_1}{Predictions for egos with Z=1 (length n_e).}
  \item{mu_e_0}{Predictions for egos with Z=0 (length n_e).}
}
}
\description{
This function implements K-fold cross-fitting to estimate conditional
expectations for both egos and alters. The splitting is done at the
ego-network level to ensure that egos and their corresponding alters are
always in the same fold (either training or hold-out).

This function estimates:
1. Alter Model: E[Y | F, X, i in R_a] -> mu_a_1, mu_a_0
2. Ego Model:   E[Y | Z, X, i in R_e] -> mu_e_1, mu_e_0
}
\keyword{internal}
